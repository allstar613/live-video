{"remainingRequest":"C:\\workspace\\live-video\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\workspace\\live-video\\src\\components\\PayCode.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\workspace\\live-video\\src\\components\\PayCode.vue","mtime":1569480089858},{"path":"C:\\workspace\\live-video\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\workspace\\live-video\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\workspace\\live-video\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState, mapActions } from \"vuex\";\nimport iconQR from \"@/assets/images/icn_qrcode.png\";\nimport iconCheck from \"@/assets/images/icn_check.png\";\nimport iconPad from \"@/assets/images/icn_pad.png\";\nimport api from \"@/api\";\n\nexport default {\n  data() {\n    return {\n      iconQR,\n      iconCheck,\n      iconPad,\n      second: 120,\n      timer_second: null,\n      timer_checkPay: null\n    };\n  },\n  methods: {\n    ...mapActions({\n      checkPayCheck: \"pay/checkPayCheck\"\n    }),\n    reciprocal() {\n      if (this.timer_second) {\n        clearInterval(this.timer_second);\n      } else {\n        this.timer_second = setInterval(() => {\n          if (this.second == 0) {\n            this.$router.go(-1);\n          }\n          this.second--;\n        }, 1000);\n      }\n    },\n    check() {\n      if (this.timer_checkPay) {\n        clearInterval(this.timer_checkPay);\n      } else {\n        this.timer_checkPay = setInterval(() => {\n          this.checkPayApi();\n        }, 1000);\n      }\n    },\n    checkPayApi() {\n      const params = {\n        orderid: this.payList.data.orderid\n      };\n      api.checkPayCheck(params).then(res => {\n        if (res.status == 1) {\n          this.$router.push(\"/playvideo\");\n        }\n      });\n    }\n  },\n  computed: {\n    ...mapState({\n      payList: state => state.pay.payList\n    }),\n    payData() {\n      return this.payList.data;\n    }\n  },\n  mounted() {\n    if (!this.payData.money) {\n      this.$router.go(-1);\n    }\n\n    const params = {\n      orderid: this.payList.data.orderid\n    };\n\n    this.checkPayCheck(params);\n\n    this.reciprocal();\n    this.check();\n    console.log(this.payList);\n  },\n  destroyed() {\n    window.removeEventListener(\"scroll\", this.scrollToTop);\n    clearInterval(this.timer_second);\n    clearInterval(this.timer_checkPay);\n  }\n};\n",{"version":3,"sources":["PayCode.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PayCode.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <main>\n    <section class=\"contents mainbackground\">\n      <div class=\"text-center mb-p5 mt-p5\">\n        <h2 class=\"text-red fz-p7 mb-p2 font-bold\">扫码支付金额 {{payData.money}}元</h2>\n        <h3 class=\"fz-p3 text-grey2\">务必输入准确金额，不能多也不能少。</h3>\n      </div>\n\n      <div class=\"flex child-center\" style=\"height:45%\">\n        <img :src=\"payData.img\" alt style=\"height:100%;\" />\n      </div>\n\n      <div class=\"text-center mt-p5 mb-p5\">\n        <h4 class=\"fz-p5 bold text-red mb10\">【请在 {{second}} 秒前完成支付】</h4>\n        <h5 class=\"fz-p4 text-red\">付款后自动跳转到播放页面</h5>\n      </div>\n      <div class=\"align-items-center child-center\" style=\"width:100%; height:7%\">\n        <div class=\"fz-p4 text-center\">用微信扫码付款</div>\n        <div class=\"flex child-center\" style=\"height:15%;width:100%\">\n          <div class=\"scan-pay--title\" style=\"width:60%\"></div>\n        </div>\n      </div>\n\n      <div style=\"width:100%;height:10%\">\n        <div class=\"flex child-between align-items-center\" style=\"width:100%; height:100%\">\n          <div style=\"width:20%\"></div>\n          <div class=\"align-items-center\" style=\"width:20%;  height:100%\">\n            <div class=\"flex child-center mb-p10\" style=\"height:70%\">\n              <img :src=\"iconQR\" alt style=\"height:100%;\" />\n            </div>\n            <div class=\"text-center\" style=\"font-size:2.3vmin\">长按二维码</div>\n          </div>\n          <div class=\"ui-divider\"></div>\n          <div style=\"width:20%;  height:100%\">\n            <div class=\"flex child-center mb-p10\" style=\"height:70%\">\n              <img :src=\"iconCheck\" alt style=\"height:100%;\" />\n            </div>\n            <div class=\"text-center\" style=\"font-size:2.3vmin\">输入支付金额完成付款</div>\n          </div>\n          <div class=\"ui-divider\"></div>\n          <div style=\"width:20%;  height:100%\">\n            <div class=\"flex child-center mb-p10\" style=\"height:70%\">\n              <img :src=\"iconPad\" alt style=\"height:100%;\" />\n            </div>\n            <div class=\"text-center\" style=\"font-size:2.3vmin\">跳转后即可观看影片</div>\n          </div>\n          <div style=\"width:20%\"></div>\n        </div>\n      </div>\n    </section>\n  </main>\n</template>\n\n<script>\nimport { mapState, mapActions } from \"vuex\";\nimport iconQR from \"@/assets/images/icn_qrcode.png\";\nimport iconCheck from \"@/assets/images/icn_check.png\";\nimport iconPad from \"@/assets/images/icn_pad.png\";\nimport api from \"@/api\";\n\nexport default {\n  data() {\n    return {\n      iconQR,\n      iconCheck,\n      iconPad,\n      second: 120,\n      timer_second: null,\n      timer_checkPay: null\n    };\n  },\n  methods: {\n    ...mapActions({\n      checkPayCheck: \"pay/checkPayCheck\"\n    }),\n    reciprocal() {\n      if (this.timer_second) {\n        clearInterval(this.timer_second);\n      } else {\n        this.timer_second = setInterval(() => {\n          if (this.second == 0) {\n            this.$router.go(-1);\n          }\n          this.second--;\n        }, 1000);\n      }\n    },\n    check() {\n      if (this.timer_checkPay) {\n        clearInterval(this.timer_checkPay);\n      } else {\n        this.timer_checkPay = setInterval(() => {\n          this.checkPayApi();\n        }, 1000);\n      }\n    },\n    checkPayApi() {\n      const params = {\n        orderid: this.payList.data.orderid\n      };\n      api.checkPayCheck(params).then(res => {\n        if (res.status == 1) {\n          this.$router.push(\"/playvideo\");\n        }\n      });\n    }\n  },\n  computed: {\n    ...mapState({\n      payList: state => state.pay.payList\n    }),\n    payData() {\n      return this.payList.data;\n    }\n  },\n  mounted() {\n    if (!this.payData.money) {\n      this.$router.go(-1);\n    }\n\n    const params = {\n      orderid: this.payList.data.orderid\n    };\n\n    this.checkPayCheck(params);\n\n    this.reciprocal();\n    this.check();\n    console.log(this.payList);\n  },\n  destroyed() {\n    window.removeEventListener(\"scroll\", this.scrollToTop);\n    clearInterval(this.timer_second);\n    clearInterval(this.timer_checkPay);\n  }\n};\n</script>\n\n<style>\n</style>\n"]}]}